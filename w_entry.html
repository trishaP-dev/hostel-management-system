<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hostel Management</title>
     <link rel="stylesheet" href="src/output.css">
     <!-- <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" /> -->
    <style>
        .scrollable-content {
            width: 82.7vw;
            min-height: 100vh; 
            padding: 20px;
        }
        .sidebar a {
            display: block;
            padding: 12px; 
            border-radius: 5px; 
            transition: background-color 0.3s; 
        }
        .sidebar a:hover, .sidebar a.active { 
            background-color: rgba(255, 255, 255, 0.2); 
        }
        .user-icon-container:hover .user-dropdown {
            display: block;
        }
        body::-webkit-scrollbar {
            width: 13px;
        }
        body::-webkit-scrollbar-track {
            background: #c8c6c6;
        }
        body::-webkit-scrollbar-thumb {
            background: #999797;
        }
        body::-webkit-scrollbar-thumb:hover {
            background: #6c6b6b;
        }
        input:disabled {
            background-color: #e5e7eb;
            cursor: not-allowed;
        }
    </style>
</head >
<body class="bg-gray-100 flex">
    <div class="w-1/6 bg-red-900 text-white min-h-screen p-6 fixed left-0 top-0 sidebar">
        <div class="flex flex-col items-center">
            <img src="images/DAVV LOGO.png" alt="Logo" class="w-24 h-24 ">
        </div>
        <nav class="mt-6 space-y-4 text-lg">
            <a href="index.html">Home</a>
            <a href="">Student Record</a>
            <a href="w_entry.html">Entry Record</a>
            <a href="W_visitor.html">Visitor Record</a>
            <a href="w_availability.html" >Check Availability</a>
            <a href="w_allot.html">Room Allotement</a>
            <a href="w_resolveissue.html">Resolve issue</a>
        </nav>
    </div>

        <div class="w-[84vw] ml-[16.5%]">
            <header class="bg-white flex justify-between items-center p-4 shadow-md fixed top-0 left-[16.8%] right-0 z-10 ">
                <h1 class="text-2xl font-bold text-red-700">Warden</h1>
                
                <div class="relative user-icon-container " id="profileButton">
                        <div class="w-11 h-11 bg-gray-300 rounded-full flex items-center justify-center">
                             <img src="svgs/user.svg" alt="">
                        </div>
                        <div class="user-dropdown hidden absolute right-0 top-100% bg-white w-52 border-gray-100 z-50 rounded-md p-3 shadow-md">
                            <div class="space-y-2">
                                <div class="text-sm text-gray-500">Name:</div>
                                <div class="font-medium">Rahul Revar</div>
                                
                                <div class="text-sm text-gray-500">Block Number:</div>
                                <div class="font-medium">02</div>
                            </div>
                        </div>
                    </div>
            </header>
        
    <div class="scrollable-content mt-16  bg-white p-6 rounded-lg shadow-lg">
        <section class="mt-4">
            <div class="mb-2 flex justify-between">
                <h2 class="text-lg font-semibold">Entry Record</h2>
                <select id="weekSelector" class="bg-blue-600 text-white pr-2 pl-3 py-2 rounded-lg hover:bg-blue-700">
                    <option value="1">Week 1</option>
                    <option value="2">Week 2</option>
                    <option value="3">Week 3</option>
                    <option value="4">Week 4</option>
                </select>
            </div>
            <div class="overflow-x-auto">
                <table class="w-full bg-white shadow-md rounded-lg">
                    <thead>
                        <tr class="bg-gray-300" id="dateHeaderRow">
                            <th class="p-2 border">Student Name</th>
                        </tr>
                    </thead>
                    <tbody id="entryTableBody"></tbody>
                </table>
            </div>
        </section>
        
        <button id="saveButton" class="mt-4 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700">Save Entries</button>
        
    </div>
    <footer class="bg-[#9B211C] h-24 p-4 flex justify-between text-white items-center ">
        <div>
            <p>For hostel-related inquiry: +91 981062270</p>
            <p>&copy; 2024 IET DAVV. All Rights Reserved. Managed by IET-DAVV web team. Contact: webmaster@ietdavv.edu.in</p>
        </div>
        <div class="flex ">
            <img class="h-8 w-8 m-1 bg-white p-1 rounded-full" src="svgs/facebook.svg" alt="facebook">
            <img class="h-8 w-8 m-1 bg-white p-1 rounded-full" src="svgs/twitter.svg" alt="twitter">
            <img class="h-8 w-8 m-1 bg-white p-1 rounded-full" src="svgs/youtube.svg" alt="youtube">
            <img class="h-8 w-8 m-1 bg-white p-1 rounded-full" src="svgs/linkedin.svg" alt="linkedin">
        </div>
    </footer>
</div>
<script>

        const students = ['Alice', 'Bob', 'Charlie', 'David'];
        const today = new Date();
        today.setMinutes(today.getMinutes() - today.getTimezoneOffset());
        const formattedToday = today.toISOString().split('T')[0];


        function saveData() {
            let savedData = {};
            document.querySelectorAll("#entryTableBody tr").forEach((row, index) => {
                let studentName = students[index];
                savedData[studentName] = {};
                row.querySelectorAll("td input").forEach((input) => {
                    let date = input.dataset.date;
                    savedData[studentName][date] = input.value;
                });
            });
            localStorage.setItem("wardenEntryRecords", JSON.stringify(savedData));
            alert("Data saved successfully!");
        }

        function generateTable(week) {
            const tableBody = document.getElementById('entryTableBody');
            const dateHeaderRow = document.getElementById('dateHeaderRow');
            tableBody.innerHTML = '';
            dateHeaderRow.innerHTML = '<th class="p-2 border">Student Name</th>';

            let startDate = new Date();
            startDate.setDate(startDate.getDate() - startDate.getDay() + (week - 1) * 7);
            let dates = [];
            for (let i = 0; i < 7; i++) {
                let date = new Date(startDate);
                date.setDate(startDate.getDate() + i);
                let dateString = date.toISOString().split('T')[0];
                dates.push(dateString);
                dateHeaderRow.innerHTML += `<th class="p-2 border">${dateString}</th>`;
            }
            students.forEach(student => {
                let row = `<tr class="border"><td class="p-2 border">${student}</td>`;
                dates.forEach(date => {
                    let isEditable = date === formattedToday ? "" : "disabled";
                    row += `<td class="p-2 border text-center">
                                <input type='time' class='p-1 border' data-date='${date}' ${isEditable}>
                            </td>`;
                });
                row += `</tr>`;
                tableBody.innerHTML += row;
            });
        }

        document.getElementById("weekSelector").addEventListener("change", (e) => generateTable(parseInt(e.target.value)));
        document.getElementById("saveButton").addEventListener("click", saveData);

        generateTable(1);
    
</script>
</body>
</html>

</body>
</html>